<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Shopping Cart</title>
</head>
<body>
    <h1>Checkout</h1>
    
    <table border="1" style="margin: 20px 0;">
        <tr>
            <td style="padding: 10px;">
                <a href="/cart">‚Üê Back to Cart</a> | 
                <a href="/user/dashboard">Dashboard</a>
            </td>
        </tr>
    </table>
    
    <table border="1" style="margin: 20px 0; width: 100%;">
        <tr>
            <td colspan="4" style="text-align: center; font-weight: bold; padding: 10px;">
                Order Summary
            </td>
        </tr>
        <tr style="background-color: #f0f0f0;">
            <th style="padding: 10px;">Product</th>
            <th style="padding: 10px;">Price</th>
            <th style="padding: 10px;">Quantity</th>
            <th style="padding: 10px;">Subtotal</th>
        </tr>
        <% cart.items.forEach(item => { %>
        <tr>
            <td style="padding: 10px;"><%= item.product.name %></td>
            <td style="padding: 10px;">$<%= item.product.price.toFixed(2) %></td>
            <td style="padding: 10px;"><%= item.quantity %></td>
            <td style="padding: 10px;">$<%= (item.product.price * item.quantity).toFixed(2) %></td>
        </tr>
        <% }); %>
        <tr style="background-color: #f0f0f0;">
            <td colspan="3" style="padding: 10px; text-align: right;"><strong>Total:</strong></td>
            <td style="padding: 10px;"><strong>$<%= cart.totalAmount.toFixed(2) %></strong></td>
        </tr>
    </table>
    
    <form action="/cart/checkout" method="POST">
        <table border="1" style="margin: 20px 0; width: 100%;">
            <tr>
                <td colspan="2" style="text-align: center; font-weight: bold; padding: 10px;">
                    Shipping Address
                </td>
            </tr>
            <tr>
                <td style="padding: 10px; width: 200px;"><label for="street">Street Address:</label></td>
                <td style="padding: 10px;">
                    <input type="text" id="street" name="street" value="<%= user.address ? user.address.street || '' : '' %>" required style="width: 300px; padding: 5px;">
                </td>
            </tr>
            <tr>
                <td style="padding: 10px;"><label for="city">City:</label></td>
                <td style="padding: 10px;">
                    <input type="text" id="city" name="city" value="<%= user.address ? user.address.city || '' : '' %>" required style="width: 300px; padding: 5px;">
                </td>
            </tr>
            <tr>
                <td style="padding: 10px;"><label for="state">State:</label></td>
                <td style="padding: 10px;">
                    <input type="text" id="state" name="state" value="<%= user.address ? user.address.state || '' : '' %>" required style="width: 300px; padding: 5px;">
                </td>
            </tr>
            <tr>
                <td style="padding: 10px;"><label for="zipCode">ZIP Code:</label></td>
                <td style="padding: 10px;">
                    <input type="text" id="zipCode" name="zipCode" value="<%= user.address ? user.address.zipCode || '' : '' %>" required style="width: 300px; padding: 5px;">
                </td>
            </tr>
            <tr>
                <td style="padding: 10px;"><label for="country">Country:</label></td>
                <td style="padding: 10px;">
                    <input type="text" id="country" name="country" value="<%= user.address ? user.address.country || '' : '' %>" required style="width: 300px; padding: 5px;">
                </td>
            </tr>
        </table>
        
        <table border="1" style="margin: 20px 0; width: 100%;">
            <tr>
                <td colspan="2" style="text-align: center; font-weight: bold; padding: 10px;">
                    Payment Method
                </td>
            </tr>
            <tr>
                <td style="padding: 15px;">
                    <input type="radio" id="cod" name="paymentMethod" value="Cash on Delivery" checked>
                    <label for="cod">Cash on Delivery</label><br><br>
                    <input type="radio" id="card" name="paymentMethod" value="Credit/Debit Card">
                    <label for="card">Credit/Debit Card</label><br><br>
                    <input type="radio" id="upi" name="paymentMethod" value="UPI">
                    <label for="upi">UPI Payment</label>
                </td>
            </tr>
        </table>
        
        <table border="1" style="margin: 20px 0;">
            <tr>
                <td style="padding: 20px; text-align: center;">
                    <button type="submit" style="padding: 10px 30px; background-color: #28a745; color: white; border: none; border-radius: 4px;">Place Order</button>
                    <a href="/cart" style="margin-left: 20px;">Back to Cart</a>
                </td>
            </tr>
        </table>
    </form>
</body>
</html>
